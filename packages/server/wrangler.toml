# Zajel Signaling Server - Cloudflare Worker Configuration
name = "zajel-signaling"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Durable Objects for WebSocket state management
[durable_objects]
bindings = [
  { name = "SIGNALING_ROOM", class_name = "SignalingRoom" },
  { name = "RELAY_REGISTRY", class_name = "RelayRegistryDO" }
]

# Migrations for Durable Objects
[[migrations]]
tag = "v1"
new_classes = ["SignalingRoom"]

[[migrations]]
tag = "v2"
new_classes = ["RelayRegistryDO"]

# Development settings
[dev]
port = 8080
local_protocol = "http"

# Production settings (uncomment and configure for deployment)
# [env.production]
# workers_dev = false
# route = { pattern = "signaling.zajel.app/*", zone_name = "zajel.app" }
