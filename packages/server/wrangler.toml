# Zajel Bootstrap Server - Cloudflare Worker Configuration
# Purpose: VPS server discovery service ONLY
name = "zajel-signaling"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Durable Object for server registry
[durable_objects]
bindings = [
  { name = "SERVER_REGISTRY", class_name = "ServerRegistryDO" }
]

# Migrations for Durable Objects
[[migrations]]
tag = "v1"
new_classes = ["SignalingRoom"]

[[migrations]]
tag = "v2"
new_classes = ["RelayRegistryDO"]

[[migrations]]
tag = "v3"
new_classes = ["ServerRegistryDO"]
deleted_classes = ["SignalingRoom", "RelayRegistryDO"]

# Development settings
[dev]
port = 8080
local_protocol = "http"
